{"componentChunkName":"component---src-templates-blog-post-js","path":"/cron/","result":{"data":{"site":{"siteMetadata":{"title":"Antony's Blog"}},"markdownRemark":{"id":"a0b2609b-8e1e-515a-b8f3-6efe44d8fb21","excerpt":"How to set up Cron job in Linux Everybody forgets to run a script sometime, but how to schedule these tasks, this is where cron is a big help ‚úå. ‚ÄúThe software‚Ä¶","html":"<h2>How to set up Cron job in Linux</h2>\n<p>Everybody forgets to run a script sometime, but how to schedule these tasks, this is where cron is a big help ‚úå.<br></p>\n<blockquote>\n<p>‚ÄúThe software utility Cron is a time-based job scheduler in Unix-like computer operating systems. Users that set up and maintain software environments use cron to schedule jobs (commands or shell scripts) to run periodically at fixed times, dates, or intervals.‚Äù - <strong>Wikipedia</strong></p>\n</blockquote>\n<p>which is exactly which we need, but how to set up ?<br>\nif you are running on a Linux machine you are in luck, it‚Äôs already installed.üëä</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token function\">sudo</span> <span class=\"token function\">service</span> <span class=\"token function\">cron</span> start\n<span class=\"token function\">sudo</span> <span class=\"token function\">service</span> <span class=\"token function\">cron</span> status</code></pre></div>\n<p>to start cron and to get status, but to get user-specific crontab use:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token function\">crontab</span> -e</code></pre></div>\n<p>this will show diffrent editor options to choose from,choose the nano version, as it‚Äôs the most simplest.\nthen follow this format</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># Example of job definition:</span>\n<span class=\"token comment\"># .---------------- minute (0 - 59)</span>\n<span class=\"token comment\"># |  .------------- hour (0 - 23)</span>\n<span class=\"token comment\"># |  |  .---------- day of month (1 - 31)</span>\n<span class=\"token comment\"># |  |  |  .------- month (1 - 12) OR jan,feb,mar,apr ...</span>\n<span class=\"token comment\"># |  |  |  |  .---- day of week (0 - 6) (Sunday=0 or 7)</span>\n<span class=\"token comment\"># |  |  |  |  |</span>\n<span class=\"token comment\"># *  *  *  *  *   command to be executed</span></code></pre></div>\n<p>for example:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token assign-left variable\">MAILTO</span><span class=\"token operator\">=</span>antonyjm462@gmail.com\n<span class=\"token assign-left variable\"><span class=\"token environment constant\">SHELL</span></span><span class=\"token operator\">=</span>/bin/bash\n<span class=\"token assign-left variable\"><span class=\"token environment constant\">PATH</span></span><span class=\"token operator\">=</span>/bin:/usr/bin:/my/path/bin\n<span class=\"token assign-left variable\"><span class=\"token environment constant\">DISPLAY</span></span><span class=\"token operator\">=</span>:0\n<span class=\"token assign-left variable\"><span class=\"token environment constant\">XAUTHORITY</span></span><span class=\"token operator\">=</span>/home/antony/.Xauthority\n<span class=\"token number\">40</span> <span class=\"token number\">22</span> * * * <span class=\"token builtin class-name\">.</span> /etc/profile<span class=\"token punctuation\">;</span> /home/antony/Code/Telegram/job.sh <span class=\"token operator\">>></span> /home/antony/Code/Telegram/cron.log <span class=\"token operator\"><span class=\"token file-descriptor important\">2</span>></span><span class=\"token file-descriptor important\">&amp;1</span></code></pre></div>\n<p>Ya I know, for automation of udemy script üôà.\nyou can also define the path var inside the crontab also with other variables for the script to work.<br>\nto create a cron job for more info on formatting use <a href=\"https://crontab.guru/\">guru</a> but you can‚Äôt use normal env variables inside cron. but don‚Äôt be dishearted there is a way.<br>\nEmbed the file inside job.sh which contains the script üëâ</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token shebang important\">#!/bin/sh</span>\n/usr/bin/python3 /home/antony/Code/Telegram/telegram.py</code></pre></div>\n<p>Always put the full path, because cron don‚Äôt get hold of the path and environ variables.\nAnd don‚Äôt forget to give all the files executable permission</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token function\">chmod</span> +x job.sh\n<span class=\"token function\">chmod</span> +x filename.ext</code></pre></div>\n<p>If problems arise :</p>\n<ol>\n<li>Make sure the script in /etc/cron.d/ is owned by root:root\n<code class=\"language-text\">chmod root:root /etc/cron.d/script</code></li>\n<li>Make sure the script ends with a newline</li>\n<li>If the script seem to not work try with a simples one e.g. <code class=\"language-text\">* * * * * root echo test &gt;&gt; /tmp/* cron_temp</code> and monitor <code class=\"language-text\">/tmp/cron_temp</code></li>\n<li>service cron status will provide hints of how well the line executed</li>\n<li>If the lines executed seems to be the culprit try running it as the user in the cron file <code class=\"language-text\">sudo -u username command-to-be-run</code>\n<br><br><br>\nalways use <code class=\"language-text\">sudo -u username command-to-be-run</code> before you finish the process<br>\nAll done, Sit back and enjoy.‚úå</li>\n</ol>","frontmatter":{"title":"Let Cron do the Job.","date":"June 01, 2020","description":"How to set Cron jobs"}}},"pageContext":{"slug":"/cron/","previous":{"fields":{"slug":"/udemy_cont/"},"frontmatter":{"title":"Free Udemy courses, Next Level"}},"next":{"fields":{"slug":"/setup-contact/"},"frontmatter":{"title":"Setup Contact in Angular Web App"}}}}}